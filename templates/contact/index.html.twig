{% extends 'base.html.twig' %}
{% import 'macros/flash.html.twig' as _flash %}

{% block title %}Contact{% endblock %}

{% block body %}

    <header>
        {% include("components/navbar.html.twig") %}
    </header>

    <div class="container">
    <div class="card-panel center-align white-text title_journee">
        <h4>Page de contact</h4>
    </div>

    <div class="card-panel">

        {% for message in app.flashes('success') %}
            {{ _flash.message(message, 'green') }}
        {% endfor %}

        {% for message in app.flashes('fail') %}
            {{ _flash.message(message, 'red') }}
        {% endfor %}

        {% if competiteurs|length > 0 %}
            <table class="striped centered responsive-table table_contact">
                <thead>
                <tr class="hide-on-small-only">
                    <th></th>
                    <th></th>
                    <th>Nom</th>
                    <th>Adresses e-mail</th>
                    <th>Numéros de téléphone</th>
                </tr>
                </thead>

                <tbody>
                {% for competiteur in competiteurs %}
                    <tr>
                        <td>
                            {% if not competiteur.visitor %}
                                {% if competiteur.isAdmin %}
                                    <span class="new badge red" data-badge-caption="Administrateur"></span>
                                {% elseif competiteur.isCapitaine %}
                                    <span class="new badge blue" data-badge-caption="Capitaine"></span>
                                {% else %}
                                    <span class="new badge green" data-badge-caption="Joueur"></span>
                                {% endif %}
                            {% else %}
                                <span class="new badge orange" data-badge-caption="Visiteur"></span>
                            {% endif %}
                        </td>
                        <td>
                            {% if competiteur.avatar %}
                                <img src="{{ vich_uploader_asset(competiteur, 'imageFile') }}" alt="Avatar" width="80rem" height="80rem" style="object-fit:cover">
                            {% else %}
                                <img src="{{ asset('images/account.png') }}" alt="Avatar" width="80rem" height="80rem" style="object-fit:cover">
                            {% endif %}
                        </td>
                        <td>{{ competiteur.nom }} {{ competiteur.prenom }}</td>
                        <td>
                            {% if competiteur.mail or competiteur.mail2 %}
                                {% if competiteur.mail %}
                                    <a class="btn blue" href="mailto:{{ competiteur.mail }}">
                                        <i class="material-icons">mail</i> {{ competiteur.mail }}
                                    </a><br>
                                {% endif %}
                                {% if competiteur.mail2 %}
                                    <a class="btn blue" href="mailto:{{ competiteur.mail2 }}">
                                        <i class="material-icons">mail</i> {{ competiteur.mail2 }}
                                    </a>
                                {% endif %}
                            {% else %}
                                <i class="material-icons grey-text">highlight_off</i>
                            {% endif %}
                        </td>
                        <td>
                            {% if competiteur.phoneNumber or competiteur.phoneNumber2 %}
                                {% if competiteur.phoneNumber %}
                                    <a class="btn blue" href="sms:{{ competiteur.phoneNumber }}">
                                        <i class="material-icons">phone_android</i> {{ competiteur.phoneNumber | split('', 2) | join('.') }}
                                    </a><br>
                                {% endif %}
                                {% if competiteur.phoneNumber2 %}
                                    <a class="btn blue" href="sms:{{ competiteur.phoneNumber2 }}">
                                        <i class="material-icons">phone_android</i> {{ competiteur.phoneNumber2 | split('', 2) | join('.') }}
                                    </a>
                                {% endif %}
                            {% else %}
                                <i class="material-icons grey-text">highlight_off</i>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="lobster_2" style="font-size: 20px;">Il n'y a pas de compétiteurs enregistrés.</p>
        {% endif %}
    </div>
    </div>
{% endblock %}