{% macro modalAlertPlayers(id, response, titre, linkMail, linkSMS, showListContactables, options) %}
    <div id="modal{{ id }}" class="modal modal-medium modal-fixed-footer">
        <div class="modal-content">

            {% if options.isCustomResponse is defined and options.isCustomResponse %}
                <button class="btn-small waves-effect light-blue darken-1 backToCheckboxes" onclick="backToCustomContactsCheckList()">
                    <i class="material-icons">arrow_back_ios</i>
                    <i class="material-icons">library_add_check</i>
                </button>
            {% endif %}

            <h5>{{ titre }}</h5>

            <div class="row">
                <p style="margin-top: 2px;" class="hide-on-small-only"><i>Rendez-vous sur votre smartphone pour contacter par SMS</i></p>

                {% if options.info is defined %}
                    <p class="blue-text"><i class="material-icons">info</i> {{ options.info }}</p>
                {% endif %}

                {% if options.isCustom is defined and options.isCustom %}
                    {{ _self.modalCustomMessage(id, response) }}
                {% else %}
                    {% if response['sms'].toString is empty and response['mail'].toString is empty %}
                        <p style="margin-bottom: 10px; padding-top: 0; padding-bottom: 0; margin-top: 10px;"><span class="pastille orange reset">Aucun joueur trouvé</span></p>
                    {% else %}
                        {% if not options.noSMS is defined %}
                            {{ _self.cardAlertPlayers(response['sms'], 'hide-on-med-and-up', 'sms', options.btnTxtSMS ?? 'par sms', linkSMS, id, showListContactables) }}
                        {% endif %}

                        {{ _self.cardAlertPlayers(response['mail'], null, 'mail', options.btnTxtMail ?? 'par e-mail', linkMail, id, showListContactables) }}
                    {% endif %}
                {% endif %}
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-blue btn-flat grey-text">Annuler</a>
        </div>
    </div>
{% endmacro %}

{% macro cardAlertPlayers(response, hideClass, media, btnTxt, link, id, showListContactables) %}
    <div class="{{ hideClass }} card grey lighten-3 z-depth-0" style="overflow:auto;{% if media == 'sms' %}margin-bottom: 10px;{% endif %}">
        {% if response['contactables']|length %}
            <a href="{{ link }}" class="center-align btn blue lighten-2" id="btn_{{ media }}_{{ id }}">
                {{ btnTxt }}
            </a>

            <script type="text/javascript">
                $(document).ready(function () {
                    let btnSendMail = $('a#btn_{{ media }}_{{ id }}');
                    if (btnSendMail.length && !btnSendMail.attr('href').includes('mailto:') && !btnSendMail.attr('href').includes('sms:')) {
                        btnSendMail.click(function () {
                            btnSendMail.addClass('disabled').html("<i class='material-icons rotating-icon'>sync</i>")
                        });
                    }
                });
            </script>
        {% endif %}

        {% if (response['contactables'] | length) == 0 %}
            <p style="margin-bottom: 10px; padding-top: 0; padding-bottom: 0; margin-top: 10px;"><span class="pastille red reset">Aucun membre contactable par {{ media }}</span></p>
        {% elseif response['notContactables'] | length %}
            <p class="green-text" style="margin-bottom: 0; padding-top: 0; padding-bottom: 4px; margin-top: 10px;">{{ response['contactables'] | length }} membre{{ (response['contactables'] | length) > 1 ? 's' : '' }} contactable{{ (response['notContactables'] | length) > 1 ? 's' : '' }}</p>
            <p class="red-text" style="margin-bottom: 0; padding-top: 0; padding-bottom: 4px; margin-top: 0;">{{ response['notContactables'] | length }} membre{{ (response['notContactables'] | length) > 1 ? 's' : '' }} non contactable{{ (response['notContactables'] | length) > 1 ? 's' : '' }}</p>
        {% endif %}

        {% if (response['contactables'] | length) != 0 and (response['notContactables'] | length) == 0 and not showListContactables %}
            <p class="pastille green reset center lighten-1" style="margin-top: 10px; margin-bottom: 10px;">Tous les joueurs sont contactables</p>
        {% else %}
            {% if ((response['contactables'] | length) != 0 and showListContactables) or (response['contactables'] | length) != 0 %}
                <ul class="row" style="margin-bottom: 0 !important">
                    {% if showListContactables %}
                        {% for joueurContactable in response['contactables'] %}
                            <li class="col s12 m6" id="contactable_{{ joueurContactable.idCompetiteur }}">
                                <div class="chip">
                                    {% if joueurContactable.avatar %}
                                        <img src="{{ vich_uploader_asset(joueurContactable, 'imageFile') | imagine_filter('thumb') }}" alt="Avatar">
                                    {% else %}
                                        <img src="{{ asset('images/account.png') | imagine_filter('thumb') }}" alt="Avatar">
                                    {% endif %}
                                    <span class="truncate green-text text-darken-2">{{ joueurContactable.nom ~ ' ' ~ joueurContactable.prenom }}</span>
                                </div>
                            </li>
                        {% endfor %}
                    {% endif %}
                    {% for joueurNotContactable in response['notContactables'] %}
                        <li class="col s12 m6" id="notContactables_{{ joueurNotContactable.idCompetiteur }}">
                            <div class="chip">
                                {% if joueurNotContactable.avatar %}
                                    <img src="{{ vich_uploader_asset(joueurNotContactable, 'imageFile') | imagine_filter('thumb') }}" alt="Avatar">
                                {% else %}
                                    <img src="{{ asset('images/account.png') | imagine_filter('thumb') }}" alt="Avatar">
                                {% endif %}
                                <span class="truncate red-text">{{ joueurNotContactable.nom ~ ' ' ~ joueurNotContactable.prenom }}</span>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    </div>
{% endmacro %}

{% macro modalGPS(id, adresse, complementAdresse, hrefMapsAdresse, hrefWazeAdresse, siteWeb, telephone) %}
    <script type="text/javascript" defer src="{{ asset('JS/copyPaste.min.js') }}"></script>
    <div id="modalGPS{{ id }}" class="modal modal-small modal-fixed-footer">
        <div class="modal-content modal-gps center">
            <h5>Coordonnées de l'adversaire</h5>

            <h6><i class="material-icons red-text">place</i>Adresse</h6>
            {% if adresse or complementAdresse %}
                {% if adresse %}
                    <div class="btn-gps">
                        <div class="row_btns row">
                            <div class="card grey lighten-3 z-depth-0 col m4">
                                <div><h6>Maps</h6></div>
                                <div>
                                    <a href="https://www.google.fr/maps?q={{ hrefMapsAdresse }}" class="z-depth-3 btn-small btn-floating white waves-effect modal-trigger">
                                        <img src="{{ asset('images/maps.svg') }}" alt="logo de google maps">
                                    </a>
                                </div>
                            </div>
                            <div class="card grey lighten-3 z-depth-0 col m4">
                                <div><h6>Waze</h6></div>
                                <div>
                                    <a href="https://waze.com/ul?q={{ hrefWazeAdresse }}" class="z-depth-3 btn-small btn-floating waves-effect modal-trigger">
                                        <img src="{{ asset('images/waze.svg') }}" alt="logo de waze">
                                    </a>
                                </div>
                            </div>
                            <div class="card grey lighten-3 z-depth-0 col m4">
                                <div><h6>Copier</h6></div>
                                <div>
                                    <button onclick="copyPaste('{{ id }}')" class="z-depth-3 btn-small btn-floating white waves-effect modal-trigger">
                                        <i class="material-icons white black-text">content_copy</i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <p class="adr adresse_{{ id }}"><b>{{ adresse }}</b></p>
                    </div>
                {% elseif not adresse and complementAdresse %}
                    <p class="complAdr" style="margin-top: 2px;"><i>Non fournie par l'adversaire</i></p>
                {% endif %}

                {% if complementAdresse %}
                    <p class="complAdr adresse_{{ id }}">{{ complementAdresse }}</p>
                {% endif %}
                <br>
            {% else %}
                <p style="margin-top: 2px;"><i>Non fournie par l'adversaire</i></p>
            {% endif %}

            <h6><i class="material-icons green-text">contact_phone</i> Numéro de téléphone</h6>
            {% if telephone %}
                <p style="margin-top: 2px;" class="complAdr hide-on-small-only"><i>Rendez-vous sur smartphone pour contacter</i></p>
                <div class="valign-wrapper telephoneDiv">
                    <div>
                        <span>{{ telephone | split('', 2) | join(' ') }}</span>
                    </div>
                    <div class="hide-on-med-and-up">
                        <a class="btn blue phone" href="tel:{{ telephone }}">
                            <i class="material-icons">phone</i>
                        </a>
                    </div>
                    {% if telephone | slice(0, 2) == "06" or telephone | slice(0, 2) == "07" %}
                        <div class="hide-on-med-and-up">
                            <a class="btn blue phone" href="sms:{{ telephone }}">
                                <i class="material-icons">message</i>
                            </a>
                        </div>
                    {% endif %}
                </div><br>
            {% else %}
                <p style="margin-top: 2px;"><i>Non pas fourni par l'adversaire</i></p>
            {% endif %}

            <h6><i class="material-icons blue-text lighten-3">language</i> Site Internet</h6>
            {% if siteWeb %}
                <a href="{{ siteWeb }}">{{ siteWeb }}</a>
            {% else %}
                <p style="margin-top: 2px;"><i>Non fourni par l'adversaire</i></p>
            {% endif %}
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-blue btn-flat grey-text">Fermer</a>
        </div>
    </div>
{% endmacro %}

{% macro modalCustomMessage(id, response) %}
    {% import 'macros/membre.html.twig' as _membre %}

    <div class="row" style="margin-bottom: 15px;">
        <div class="input-field col s12 m8 offset-m2 l6 offset-l3">
            <label for="search-input-custom" style="margin-bottom: 0">Rechercher un joueur ...</label>
            <input placeholder="... par nom, prénom, rôle" id="search-input-custom" onkeyup="searchValue('#search-table-custom', '#search-input-custom', 4, 1)" type="text" class="validate" style="margin-bottom: 0">
        </div>
    </div>

    <div id="divSelectedContacts" class="card grey lighten-3 z-depth-0" hidden>
        <i onclick="removeSelection()" class="material-icons red-text text-darken-1" id="removeAllCustomContacts">group_remove</i>
        <h6>Contacts sélectionnés :</h6>
        <div id="listSelectedContacts"></div>

        <button class="btn blue darken-1" id="btn_display_medias" onclick="getInfosContactsSelectedPlayers()">
            Contacter
        </button>
    </div>

    <table class="striped centered responsive-table backoffice-table table-to-adapt-columns" id="search-table-custom">
        <tbody>
        {% for joueur in response %}
            <tr>
                <td>
                    <label>
                        <input onchange="addRemoveCustomContact(this.checked, '{{ joueur.joueur.idCompetiteur }}', '{{ joueur.joueur.nom ~ ' ' ~ joueur.joueur.prenom }}', '{{ joueur.joueur.avatar }}')" value="{{ joueur.joueur.nom ~ ' ' ~ joueur.joueur.prenom }}" id="{{ joueur.joueur.idCompetiteur }}" type="checkbox" class="filled-in"/>
                        <span style="padding-left: 20px;vertical-align: middle;height: 21px;"></span>
                    </label>
                </td>
                <td style="padding-top: 8px; padding-bottom: 8px;">
                    {{ _membre.badgesRoles(joueur.joueur, {sheetDataHasViolations: null, dejaInscrit: null}) }}
                </td>
                <td class="td_picture_compet">
                    <img class="picture_compet avatar" src="{{ (joueur.joueur.avatar ? vich_uploader_asset(joueur.joueur, 'imageFile') : asset('images/account.png')) | imagine_filter('thumb') }}" alt="Avatar" width="55px" height="55px">
                </td>
                <td>
                    {{ joueur.joueur.nom }} {{ joueur.joueur.prenom }}
                </td>
                <td><i class="material-icons {% if joueur.mail is null %}red-text{% else %}green-text text-darken-2{% endif %}">mail</i></td>
                <td><i class="material-icons {% if joueur.sms is null %}red-text{% else %}green-text text-darken-2{% endif %}">phone_iphone</i></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endmacro %}