{% macro rencontre(idJournee, type, idEquipe, date, form, domicile) %}
    <div class="card-panel center-align">
        <h4 class="hide-on-small-only titre">Journée {{ idJournee }} - Equipe {{ idEquipe }} - {{ date|format_datetime('long', 'none', locale='fr') }}</h4>
        <h4 class="hide-on-med-and-up titre">J{{ idJournee }} - Equipe {{ idEquipe }}<br>{{ date|date("m/d/Y") }}</h4>

        {{ form_start(form) }}
            <p><i>L'équipe {{ idEquipe }} jouera contre</i></p>
            <div class="row">
                <div class="col s12">
                    {{ form_row(form.adversaire) }}
                </div>
            </div>
            <div class="row">
                <div class="col s12 m6">
                    <div class="switch">
                        <label>
                            <span id="domicile">Domicile</span>
                            <input type="checkbox" name="lieu_rencontre" class="validate" id="lieu_rencontre">
                            <span class="lever"></span>
                            <span id="exterieur">Extérieur</span>
                        </label>
                    </div>
                </div>
                <div class="col s12 m6">
                    {{ form_row(form.hosted) }}
                </div>
            </div>

            <div class="issue">
                <h5>OU</h5>
                <p><i>Il n'y a pas de rencontre pour cette équipe lors de cette journée</i></p>
                {{ form_row(form.exempt) }}
            </div>

            <div class="issue">
                <h5>OU</h5>
                <p><i>La rencontre est reportée à une date ultèrieure</i></p>
                {{ form_row(form.reporte) }}
                <div class="container">
                    {{ form_row(form.dateReport) }}
                </div>
            </div>


            <br><button class="btn btn_form waves-effect waves-light light-blue darken-1">Modifier</button>
        {{ form_end(form) }}
    </div>

    <script>
        $(document).ready(function() {
            let exterieur = "{{ domicile }}";

            let lieu_rencontre = $('#lieu_rencontre');
            let span_domicile = $('#domicile');
            let span_exterieur = $('#exterieur');

            let exemptDep = $('#back_office_rencontre_departementale_exempt');
            let adversaireDep = $('#back_office_rencontre_departementale_adversaire');
            let hostedDep = $('#back_office_rencontre_departementale_hosted');

            let exemptPar = $('#back_office_rencontre_paris_exempt');
            let adversairePar = $('#back_office_rencontre_paris_adversaire');
            let hostedPar = $('#back_office_rencontre_paris_hosted');

            if (exterieur === "D"){
                hostedDep.prop('disabled', false);
                hostedPar.prop('disabled', false);
                span_domicile.css("font-weight", "bold");
                span_exterieur.css("font-weight", "normal");
            }
            else if (exterieur === "E") {
                lieu_rencontre.prop('checked', true);
                hostedDep.prop('disabled', true);
                hostedPar.prop('disabled', true);
                span_domicile.css("font-weight", "normal");
                span_exterieur.css("font-weight", "bold");
            }

            if (exemptDep.is(':checked')){
                adversaireDep.val("").attr('placeholder', "Pas d'adversaire");
                adversaireDep.prop('disabled', true);
                lieu_rencontre.prop('checked', false).prop('disabled', true);
                hostedDep.prop('checked', false).prop('disabled', true);
                span_domicile.css("font-weight", "normal");
                span_exterieur.css("font-weight", "normal");
                span_domicile.css("color", "#a4a2a2");
                span_exterieur.css("color", "#a4a2a2");
            }
            else adversaireDep.prop('disabled', false);

            if (exemptPar.is(':checked')){
                adversairePar.val("").attr('placeholder', "Pas d'adversaire");
                adversairePar.prop('disabled', true);
                lieu_rencontre.prop('checked', false).prop('disabled', true);
                hostedPar.prop('checked', false).prop('disabled', true);
                span_domicile.css("font-weight", "normal");
                span_exterieur.css("font-weight", "normal");
                span_domicile.css("color", "#a4a2a2");
                span_exterieur.css("color", "#a4a2a2");
            }
            else adversairePar.prop('disabled', false);
        });
    </script>
{% endmacro %}