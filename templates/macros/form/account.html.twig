{% macro edit_account(type, title, form, urlImage, editMode, anneeCertificatMedical, options) %}

    <div class="card-panel center-align account-card">

        <h4 class="h4_form" style="margin-bottom: 0;">{{ title }}</h4><br>

        {{ form_start(form) }}
            <div class="row section" style="margin-bottom: 0;">
                <h5 class="dark_blue" style="margin-top: 0;">Informations personnelles</h5>

                <div class="col s12 m4">
                    <span><i class="material-icons prefix">person</i> NOM *</span>{{ form_row(form.nom, {'id': 'my_own_id'}) }}
                </div>
                <div class="col s12 m4">
                    <span><i class="material-icons prefix">person</i> Prénom *</span>{{ form_row(form.prenom) }}
                </div>
                <div class="col s12 m4">
                    <span><i class="material-icons prefix">account_circle</i> Pseudo *</span>{{ form_row(form.username, {'attr': {'autocapitalize': 'off'}}) }}
                </div>

                {% if 'ROLE_ADMIN' in app.token.roleNames and type == 'backoffice' %}
                    <div class="col s12 m4">
                        {{ form_row(form.isAdmin, {'id': 'cb_admin'}) }}
                    </div>
                    <div class="col s12 m4">
                        {{ form_row(form.isCapitaine, {'id': 'cb_capitaine'}) }}
                    </div>
                    <div class="col s12 m4">
                        {{ form_row(form.visitor, {'id': 'cb_visiteur'}) }}
                    </div>
                {% endif %}
            </div>

            {% if type == 'general' or ('ROLE_ADMIN' in app.token.roleNames and type == 'backoffice') %}
                <div class="row section">
                    <h5 class="dark_blue">Contact</h5>
                    <p><i>Une adresse email minimum requise</i></p>

                    <div class="col s12 m6 offset-m3">
                        <span><i class="material-icons prefix">mail</i> Adresse mail principale</span>{{ form_row(form.mail, {'id': 'i_mail'}) }}
                    </div>
                    <div class="col s12 m3 left-align">
                        {{ form_row(form.contactableMail, {'id': 'cb_c_mail'}) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6 offset-m3">
                        <span><i class="material-icons prefix">mail</i> Adresse mail secondaire</span>{{ form_row(form.mail2, {'id': 'i_mail_2'}) }}
                    </div>
                    <div class="col s12 m3 left-align">
                        {{ form_row(form.contactableMail2, {'id': 'cb_c_mail_2'}) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6 offset-m3">
                        <span><i class="material-icons prefix">smartphone</i> Téléphone principal</span>{{ form_row(form.phoneNumber, {'id': 'i_num'}) }}
                    </div>
                    <div class="col s12 m3 left-align">
                        {{ form_row(form.contactablePhoneNumber, {'id': 'cb_c_num'}) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6 offset-m3">
                        <span><i class="material-icons prefix">smartphone</i> Téléphone secondaire</span>{{ form_row(form.phoneNumber2, {'id': 'i_num_2'}) }}
                    </div>
                    <div class="col s12 m3 left-align">
                        {{ form_row(form.contactablePhoneNumber2, {'id': 'cb_c_num_2'}) }}
                    </div>
                </div>

                <script>
                    $('#i_num').on('keypress', function(e) { if (e.which === 32) return false; });
                    $('#i_num_2').on('keypress', function(e) { if (e.which === 32) return false; });
                </script>
            {% endif %}

            <div class="row section" style="margin-bottom: 0;">
                <h5 class="dark_blue">Informations Ping</h5>

                {% if 'ROLE_JOUEUR' in app.token.roleNames %}
                    <div class="col s12 m6">
                        <span><i class="material-icons prefix">payment</i> N° licence</span>
                        {% if type == 'backoffice' %}
                            {{ form_row(form.licence) }}
                        {% else %}
                            <br><br>
                            <b><span style="margin-top: 20px;">{{ options.licence }}</span></b>
                        {% endif %}
                    </div>
                {% endif %}
                <div class="col s12 m6" {% if 'ROLE_JOUEUR' not in app.token.roleNames and type == 'general' %}style="margin-left: 25%;"{% endif %}>
                    <span><i class="material-icons prefix">trending_up</i> Classement officiel</span>{{ form_row(form.classementOfficiel, {'attr': ('ROLE_VISITEUR' in app.token.roleNames and type == 'general' ? {'disabled': 'disabled', 'placeholder': 'Vous n\'êtes pas compétiteur'} : {} )}) }}
                </div>
                <div class="col m1 hide-on-small-and-down"></div>
            </div>

            {% if anneeCertificatMedical != -1 %}
                <div class="section input_file" style="margin-bottom: 0;">
                    <h5 class="dark_blue">Certificat médical</h5>
                    {% if anneeCertificatMedical != null and anneeCertificatMedical > "now"|date('Y')-2 %}
                        <p><span class="green white-text darken-1" style="padding: 8px; border-radius: 30px;">Renouvellement à la rentrée <b>{{ anneeCertificatMedical+3 }} - {{ anneeCertificatMedical+4 }}</b></span></p>
                    {% else %}
                        <p><span class="red white-text darken-1" style="padding: 8px; border-radius: 30px;">Renouvellement à la rentrée <b>{{ "now"|date('Y') }} - {{ "now"|date('Y')+1 }}</b></span></p>
                    {% endif %}
                </div>
            {% endif %}

            <div class="section input_file" style="margin-bottom: 0;">
                <h5 class="dark_blue">Image de profil</h5>
                <p style="margin-top: 0; margin-bottom: 0;"><i>Formats acceptés : <b>JPEG, PNG et GIF</b></i></p>
                {{ form_row(form.imageFile) }}

                <div class="avatarSectionDelete">
                    {% if urlImage %}
                        <a onclick="return confirm('Êtes-vous sûr de supprimer l\'avatar ?')" class='deleteAvatar btn waves-effect waves-light red lighten-2'
                            {% if type == 'backoffice' %}
                                href="{{ path('backoffice.competiteur.delete.avatar', {id: options.competiteurId}) }}"
                            {% else %}
                                href="{{ path('account.delete.avatar') }}"
                            {% endif %}>
                            <i class="material-icons">delete</i>
                        </a>
                    {% endif %}
                    <img class="avatar" width="120" height="120" src="{{ asset(urlImage ? 'images/profile_pictures/' ~ urlImage : 'images/account.png') }}" alt="image de profil du joueur">
                </div>
            </div>

            {% if app.request.getPathInfo == '/backoffice/competiteur/new' %}
                <p style="margin-top: 0; margin-bottom: 25px;" class="blue-text"><i class="material-icons">info</i> Le mot de passe par défaut est <b>esftt</b></p>
            {% endif %}

            <a href="{{ path(type == 'backoffice' ? 'backoffice.competiteurs' : 'index') }}" class="btn waves-effect waves-light grey">Annuler</a>
            <button
                {% if editMode and (not options.competiteurIsVisitor is defined or options.competiteurIsVisitor == false) %}
                    onclick="alertBecomingVisitor()"
                {% endif %}
                class="btn waves-effect waves-light light-blue darken-1">{{ editMode ? 'Modifier' : 'Créer' }}
            </button>
        {{ form_end(form) }}
    </div>

    {% if 'ROLE_ADMIN' in app.token.roleNames %}
        <script type="text/javascript" src="{{ asset('JS/eventsCheckboxAdminAccount.js') }}" defer></script>
    {% endif %}

    <script type="text/javascript" src="{{ asset('JS/eventsCheckboxAccount.js') }}" defer></script>
{% endmacro %}

{% macro edit_password(title, path, type, options) %}
    <div class="card-panel center-align">
        <h4 class="h4_form">{{ title }}</h4>

        <form action="{% if type == 'general' %}{{ path(path) }}{% elseif type == 'backoffice' %}{{ path(path, {id: options.competiteurId}) }}{% endif %}" method="POST">
            <div class="row">
                {% if type == 'general' %}
                    <div class="input-field col s12 l4">
                        <input name="actual_password" id="actual_password" type="password" class="validate" maxlength="100" required>
                        <label for="actual_password">Mot de passe actuel</label>
                    </div>
                {% endif %}
                <div class="input-field col s12 {% if type == 'general' %}l4{% elseif type == 'backoffice' %}m6{% endif %}">
                    <input name="new_password" id="new_password" type="password" class="validate" maxlength="100" required>
                    <label for="new_password">Nouveau mot de passe</label>
                </div>
                <div class="input-field col s12 {% if type == 'general' %}l4{% elseif type == 'backoffice' %}m6{% endif %}">
                    <input name="new_password_validate" id="new_password_validate" type="password" maxlength="100" class="validate" required>
                    <label for="new_password_validate">Saisir de nouveau</label>
                </div>
            </div>
            <br><button id="btnEditPassword" class="btn btn_form waves-effect waves-light light-blue darken-1" disabled>Modifier</button>
        </form>
    </div>

    <script type="text/javascript">
        let type = '{{ type }}'
    </script>
    <script type="text/javascript" src="{{ asset('JS/accountEditPassword.js') }}" defer></script>
{% endmacro %}